ТЗ на разработку универсального модуля отправки заявки

Модульность, в основном конфиге определяется куда отправлять лиды, это отдельные модули с одним интерфейсом. Пока только битрикс, в будущем почту добавим и другие CMS.

Проект состоит из модулей: 

-js библиотека
Реализация функции отправки заявки, на кнопку будет вешаться обработчик который принимает как аргументы какую информацию отправлять и от имени какой формы.
Аргументы: uniapi_sendlead(formname, name, email, phone, data) data это дополнительный параметр который может включать выбранный товар.
Кроме этого должны отправляться utm метки и источник трафика. Источник трафика определяется отдельным анализатором.
/?utm_source=yandex_{source}&utm_medium=cpc&utm_campaign={campaign_id}&utm_content={banner_id}&utm_network={source_type}&utm_placement={source}&utm_term={keyword}
form_ID

-php скрипт который принимает данные формы
Обработчик ajax запроса, задача записать лид и информацию о нем в базу.

-php worker 
исполняется после добавления нового лида, либо после вызова планировщиком
для каждого модуля отправки вызывает стандартный метод этого модуля, у них должен быть один интерфейс
Если один из модулей вернул false то пропустить этот лид. Если успешно модули сработали то проставить в базе sent = 1

-анализатор источника uniapi_source.php
Определяет откуда клиент
возьми из базы артпрайма список источников(удали чисто артпраймовские)
дополни популярными соц сетями, я уверен что в сети есть примеры анализаторов.


-Конфиг main_cfg.php
Выбранные модули отправки лидов, по умолчанию b24

-модуль b24

-Конфиг модуля битрикс24 b24_cfg.php
логин, пароль,адрес портала, источник по умолчанию
, сопоставления источников(тип и соответствующий id в битриксе, если тип не определен или его нет в списке то использовать по умолчанию)
, Список ID сотрудников(если пустой кидать случайному, если несколько кидать случайно из списка)

-installer.sql создание таблицы leads информация о лиде, метках, источнике, дате создания, статусе (отправлен или нет), дополнительное текстовое поле с служебной информацией

проект на который надо установить модуль
Хост: 46.4.56.88
Пользователь: ooom7
Пароль: AZeglL
http://ооом7.рф/login
admin
parol1234

/?utm_source=yandex_{source}&utm_medium=cpc&utm_campaign={campaign_id}&utm_content={banner_id}&utm_network={source_type}&utm_placement={source}&utm_term={keyword}
form_ID

Залить проект в github
